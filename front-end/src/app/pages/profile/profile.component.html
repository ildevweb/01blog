<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light sticky-top shadow-sm">
  <div class="container">
    <a class="navbar-brand fw-bold">SocialMedia</a>

    <div class="collapse navbar-collapse show">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item"><a class="nav-link">Home</a></li>
        <li class="nav-item">
          <a class="nav-link active">Profile</a>
        </li>
        <li class="nav-item"><a class="nav-link">Saved Posts</a></li>

        <!-- Admin link -->
        <li class="nav-item" *ngIf="isAdmin">
          <a class="nav-link">Admin Dashboard</a>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Profile Header -->
<header class="profile-header">
  <img [src]="profileBannerUrl" class="profile-banner" />

  <div class="profile-info container">
    <img [src]="profilePhotoUrl" class="profile-photo" />

    <div class="ms-3">
      <h2>{{ username }}</h2>
      <div class="d-flex gap-3 text-muted">
        <div><strong>{{ followersCount }}</strong> Followers</div>
        <div><strong>{{ followingCount }}</strong> Following</div>

        <button
          class="btn btn-outline-primary ms-auto"
          (click)="openEditProfile()"
        >
          Edit Profile
        </button>
      </div>
    </div>
  </div>
</header>

<!-- Create Post Section -->
<section class="col-12 mb-4">
  <div class="card shadow-sm">
    <div class="card-body">
      <form id="createPostForm">
        <div class="mb-3">
          <textarea
            class="form-control"
            placeholder="What's on your mind, username?"
            rows="3"
            name="postText"
            required
          ></textarea>
        </div>
        <div class="mb-3">
          <input type="file" class="form-control" name="postImage" accept="image/*" />
        </div>
        <button type="submit" class="btn btn-primary">Post</button>
      </form>
    </div>
  </div>
</section>


<!-- My Posts -->
<section class="container mb-5">
  <h3>My Posts</h3>

  <div class="row g-3">
    <div
      class="col-12 col-md-6 col-lg-4"
      *ngFor="let post of posts"
    >
      <div class="card shadow-sm h-100">
        <div class="card-header d-flex align-items-center gap-2">
          <img [src]="profilePhotoUrl" class="avatar-sm" />
          <strong>{{ username }}</strong>
          <small class="text-muted ms-auto">
            {{ post.timestamp }}
          </small>
        </div>

        <div class="card-body">
          <p>{{ post.text }}</p>

          <img
            *ngIf="post.image"
            [src]="post.image"
            class="post-img"
          />
        </div>

        <div class="card-footer d-flex justify-content-between">
          <button class="btn btn-sm btn-outline-primary">Like</button>
          <button class="btn btn-sm btn-outline-secondary">Comment</button>
          <button class="btn btn-sm btn-outline-success">Share</button>
        </div>
      </div>
    </div>
  </div>
</section>



<!-- Edit Profile Modal -->
<div
  class="modal fade show d-block"
  *ngIf="isEditProfileOpen"
>
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">

      <div class="modal-header">
        <h5 class="modal-title">Edit Profile</h5>
        <button
          type="button"
          class="btn-close"
          (click)="closeEditProfile()"
        ></button>
      </div>

      <div class="modal-body">
        <div class="mb-3">
          <label class="form-label">Username</label>
          <input
            type="text"
            class="form-control"
            [(ngModel)]="username"
          />
        </div>

        <div class="mb-3">
          <label class="form-label">Bio</label>
          <textarea
            class="form-control"
            [(ngModel)]="bio"
            rows="3"
          ></textarea>
        </div>
      </div>

      <div class="modal-footer">
        <button
          class="btn btn-secondary"
          (click)="closeEditProfile()"
        >
          Cancel
        </button>

        <button
          class="btn btn-primary"
          (click)="closeEditProfile()"
        >
          Save Changes
        </button>
      </div>

    </div>
  </div>
</div>

<!-- Modal backdrop -->
<div
  class="modal-backdrop fade show"
  *ngIf="isEditProfileOpen"
></div>

